<!DOCTYPE html>
<html>
<head>
    <title>Firebase Course Generator - JSON Object Format</title>

    <link rel="stylesheet" href="css/style.css">
    <style>
        body { font-family: Arial; margin: 40px; max-width: 1200px; }
        textarea { width: 100%; height: 300px; margin: 10px 0; padding: 10px; font-family: monospace; }
        button { padding: 12px 24px; margin: 10px 5px; font-size: 16px; }
        .section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; }
        .output { background: #f5f5f5; padding: 15px; }
    </style>
</head>
<body>
    <h1>ðŸ”¥ Firebase Course Generator - JSON Object Format</h1>
    
    <div class="section">
        <h3>ðŸ“‹ Paste Your Excel Data (Tab-separated):</h3>
        <textarea id="excelData" placeholder="Paste your Excel data here">
DSA_DAY1	DAY 1: Introduction	1 hours 9 min	1	Path to Placement	https://drive.google.com/file/d/1mLvQAi2LN9ikQBi5v28vFZq5KqEPrqel/preview	04:09	Syllabus	https://drive.google.com/file/d/1EOtiIE8tBqPdWncts0THtCZ1EZ_L1Rr6/preview
DSA_DAY1	DAY 1: Introduction		2	What you will learn	https://drive.google.com/file/d/1W-JPvLHDGpri6o-vZagGd3ucxEQwpT2t/preview	01:01		
DSA_DAY1	DAY 1: Introduction		3	Prerequisites	https://drive.google.com/file/d/1IG_cdrMhXvCBfqpJS4pH9KWjhU6DCf8k/preview	05:09		
DSA_DAY2	DAY 2: Java Basics	2 hours 9 min	1	Creating a JAVA File	https://drive.google.com/file/d/1o_RWAdI0xpoFkCPjkMx6JINoLLteOCdO/preview	05:09	Syllabus	https://drive.google.com/file/d/18IJ-4TNr76cZpIIDppl1gQTT3fjVy2GC/preview
DSA_DAY2	DAY 2: Java Basics		2	Boilerplate Code	https://drive.google.com/file/d/1NVDblpLxPmHsWhKn9FPklbAV4kBjhxN1/preview	05:09		
        </textarea>
        <button onclick="convertToFirebase()" style="background: #28a745; color: white;">Generate Firebase Data</button>
        <button onclick="clearData()">Clear</button>

        <button 
    onclick="window.location.href='firebase-data-feeder.html'" 
    style="
        background-color: #4CAF50;
        color: white;
        border: none;
        padding: 10px 16px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
    "
    >
    Open Firebase Data Feeder
    </button>


    </div>

    <div class="section">
        <h3>âœ… Generated Firebase Data (Single JSON Object):</h3>
        <textarea id="output" readonly class="output"></textarea>
        <button onclick="copyToClipboard()" style="background: #007bff; color: white;">Copy to Clipboard</button>
    </div>

    <script>
    function convertToFirebase() {
        const excelData = document.getElementById('excelData').value;
        const rows = excelData.split('\n').filter(row => row.trim());
        
        const courses = {};
        
        rows.forEach(row => {
            const [courseId, courseTitle, totalDuration, lectureNum, lectureTitle, videoUrl, lectureDuration, resourceName, resourceUrl] = row.split('\t');
            
            if (!courseId) return;
            
            if (!courses[courseId]) {
                courses[courseId] = {
                    title: courseTitle,
                    description: `Complete ${courseTitle} with hands-on coding exercises and examples`,
                    duration: totalDuration || 'Self-paced',
                    thumbnail: "https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=400&h=250&fit=crop",
                    instructor: "DSA Expert",
                    createdAt: "2024-01-01",
                    lectures: [],
                    resources: []
                };
            }
            
            // Add lecture
            if (lectureTitle && videoUrl) {
                const order = parseInt(lectureNum);
                if (!isNaN(order)) {
                    const lectureExists = courses[courseId].lectures.some(lec => lec.order === order);
                    if (!lectureExists) {
                        courses[courseId].lectures.push({
                            id: `lecture${order}`,
                            title: lectureTitle,
                            videoUrl: videoUrl,
                            description: `${lectureTitle} - Detailed explanation with examples`,
                            duration: lectureDuration || '10:00',
                            order: order
                        });
                    }
                }
            }
            
            // Add resource
            if (resourceName && resourceUrl) {
                const resourceExists = courses[courseId].resources.some(res => res.name === resourceName);
                if (!resourceExists) {
                    courses[courseId].resources.push({
                        name: resourceName,
                        type: "file",
                        url: resourceUrl,
                        size: "1.5 MB"
                    });
                }
            }
        });
        
        // Format as a single JSON object with course IDs as keys
        const output = JSON.stringify(courses, null, 2);
        
        document.getElementById('output').value = output;
    }

    function clearData() {
        document.getElementById('excelData').value = '';
        document.getElementById('output').value = '';
    }

    function copyToClipboard() {
        const output = document.getElementById('output');
        output.select();
        document.execCommand('copy');
        alert('âœ… Copied to clipboard! Ready to paste in Firebase.');
    }

    // Auto-generate on load
    window.onload = function() {
        setTimeout(convertToFirebase, 500);
    };
    </script>
</body>
</html>